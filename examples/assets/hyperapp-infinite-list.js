!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.hyperappInfiniteList={})}(this,function(e){"use strict";function y(e,t){for(var n=arguments,o=[],r=[],i=arguments.length;2<i--;)o.push(n[i]);for(;o.length;){var a=o.pop();if(a&&a.pop)for(i=a.length;i--;)o.push(a[i]);else null!=a&&!0!==a&&!1!==a&&r.push(a)}return"function"==typeof e?e(t||{},r):{nodeName:e,attributes:t||{},children:r,key:t&&t.key}}e.createState=function(t){void 0===t&&(t={});var n={items:[],_$el:null,_position:0};return Object.keys(t).forEach(function(e){if(e in n)throw new Error("State name '"+e+"' is reserved");n[e]=t[e]}),n},e.createActions=function(t){void 0===t&&(t={});var n={setItems:function(e){if(!(e instanceof Array))throw new Error("items is not array");return{items:e}},_setContainerElement:function(e){return{_$el:e}},_calcPosition:function(e){var n=e.preloadItemCount,o=e.itemHeight;return function(e){var t=Math.max(0,Math.floor(e._$el.scrollTop/o)-n);if(e._position!==t)return{_position:t}}}};return Object.keys(t).forEach(function(e){if(e in n)throw new Error("Action name '"+e+"' is reserved");n[e]=t[e]}),n},e.createList=function(d){var v=null;return function(m){return function(i,a){var e=m.namespace,s=m.itemHeight,t=m.preloadItemCount;void 0===t&&(t=10);var n=m.onReachTop;void 0===n&&(n=function(){});var o=m.onReachBottom;void 0===o&&(o=function(){});var r=m.onCreate;void 0===r&&(r=function(){});var u=m.onUpdate;if(void 0===u&&(u=function(){}),!e)throw new Error("Prop[namespace] is not specified");if(!i[e])throw new Error("Can't find namespace '"+e+"' in state");if(!a[e])throw new Error("Can't find namespace '"+e+"' in actions");if(!/^\d+(\.\d+)?$/.test(String(s)))throw new Error("Prop[itemHeight] must be numeric");if(!/^\d+$/.test(String(t)))throw new Error("Prop[preloadItemCount] must be integer");Object.keys(m).forEach(function(e){if(/^on[A-Z]/.test(e)&&"function"!=typeof m[e])throw new Error("Prop["+e+"] must be function")});var c=i[e],f=a[e],p=s*c.items.length,l=c._$el?Math.min(c.items.length,c._position+Math.ceil(c._$el.offsetHeight/s)+2*t):0,h=y("div",{style:{overflow:"auto",height:"100%"},oncreate:function(e){f._setContainerElement(e),r(e)},onupdate:function(){return u(c._$el)},onscroll:function(){var e=c._$el.scrollTop;0===e&&n(c._$el),e>=p-c._$el.offsetHeight-1&&o(c._$el),f._calcPosition({preloadItemCount:t,itemHeight:s})}},y("div",{style:{position:"relative",height:p+"px"}},c.items.slice(c._position,l).map(function(e,t){var n=c._position+t,o=y(d,e);"function"==typeof o&&(o=o(i,a)),null==o.key&&null==v&&(v=!0);var r={height:s+"px",position:"absolute",top:n*s+"px"};return o.attributes.style=o.attributes.style||{},Object.keys(r).forEach(function(e){o.attributes.style[e]=r[e]}),o})));return v&&(console.warn("For each item you need to set the (unique) key prop","https://github.com/jorgebucaran/hyperapp#keys"),v=!1),h}}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=hyperapp-infinite-list.js.map
